<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APOCALYPSE</title>
    <link rel="stylesheet" href="style.css?v=36">
</head>

<body>
    <div id="game-container">
        <!-- Title Screen -->
        <div id="title-screen" class="screen active">
            <h1 style="font-size: 48px; margin-bottom: 20px;">APOCALYPSE</h1>
            <p style="font-size: 18px; margin-bottom: 30px;">印を結び、敵を討て！</p>
            <button id="btn-start" class="btn">戦闘開始</button>
            <button id="btn-title-reselect" class="btn" style="margin-top: 10px;">印を変更</button>
        </div>

        <!-- Seal Selection Screen -->
        <div id="kanji-select-screen" class="screen">
            <h2>印を結べ</h2>


            <!-- Main Center Area -->
            <div class="seal-main-content">
                <div id="handwriting-ui">
                    <canvas id="writing-pad" width="350" height="350"></canvas>

                    <div id="result-display-area">
                        <span class="label">認識:</span>
                        <span id="result-char" style="color:#e74c3c; font-weight:bold; font-size:32px;">?</span>
                        <span id="result-name" style="color:#aaa;">---</span>
                    </div>

                    <div class="hw-controls">
                        <button id="btn-clear" class="btn">消去</button>
                        <button id="btn-submit" class="btn primary">認識</button>
                    </div>

                    <button id="btn-confirm-start" class="btn"
                        style="display:none; background:#e67e22; color:white; font-size:24px; padding:10px 40px; margin-top: 20px;">
                        この印で始める
                    </button>
                </div>
            </div>

            <!-- Toggle Button for Side Panel -->
            <button id="btn-open-list" title="一覧を開く">◀</button>

            <!-- Right Side Panel (Collapsible) -->
            <div class="seal-side-panel" id="seal-side-panel">
                <button id="btn-close-list">×</button>
                <h3 style="margin-top: 40px; border-bottom: 1px solid #555; padding-bottom: 10px;">印一覧</h3>
                <div id="list-selection-container">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- Result Screen (used for shop, game over) -->
        <div id="result-screen" class="screen">
            <h2 id="result-title">結果</h2>

            <!-- Shop UI -->
            <div id="shop-container" style="display: none;">
                <h3>強化 (銭: <span id="shop-money">0</span>)</h3>
                <div class="stat-row">
                    <span>能力 Lv.<span id="lvl-ability">1</span></span>
                    <button id="btn-up-ability" class="btn">強化</button>
                </div>
                <div class="stat-row">
                    <span>攻撃 Lv.<span id="lvl-atk">1</span></span>
                    <button id="btn-up-atk" class="btn">強化</button>
                </div>
                <div class="stat-row">
                    <span>体力 Lv.<span id="lvl-hp">1</span></span>
                    <button id="btn-up-hp" class="btn">強化</button>
                </div>
                <button id="btn-next-stage" class="btn" style="margin-top: 20px; font-size: 24px;">次の戦場へ</button>
            </div>

            <!-- Game Over UI -->
            <div id="game-over-container" style="display: none;">
                <div style="margin-top: 20px;">
                    <button id="btn-retry" class="btn" style="font-size: 20px;">再挑戦</button>
                    <button id="btn-reset" class="btn" style="font-size: 20px; background: #8e44ad;">最初から</button>
                </div>
            </div>

            <!-- All Clear -->
            <div id="all-clear-container" style="display: none;">
                <p>全ての強敵を打ち倒した！</p>
                <button id="btn-ng-plus" class="btn" style="font-size: 24px; margin: 10px auto; width: 300px;">New Game
                    +</button>
                <button id="btn-full-reset" class="btn"
                    style="font-size: 18px; margin: 10px auto; width: 300px; background: #e74c3c;">完全リセット</button>
            </div>
        </div>

        <!-- Game Screen (Canvas) -->
        <div id="game-screen" class="screen">
            <canvas id="game-canvas"></canvas>
            <div id="hud" style="display: none;">
                <div class="hud-top">
                    <div id="hud-hp">体力: 100/100</div>
                    <div id="hud-money">銭: 0</div>
                    <div id="hud-ability">能力準備完了</div>
                </div>
            </div>
        </div>

    </div>
    </div>

    <script src="recognizer.js?t=20260115v57"></script>
    <script src="game.js?t=20260115v57"></script>
</body>

</html>